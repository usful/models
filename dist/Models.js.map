{"version":3,"sources":["webpack:///webpack/bootstrap 2aa165414ae4a37c8eab","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/fbemitter/index.js","webpack:///./node_modules/fbemitter/lib/EmitterSubscription.js","webpack:///./node_modules/fbjs/lib/invariant.js","webpack:///./src/middleware/events/index.js","webpack:///./src/Models.js","webpack:///./src/TypedArray.js","webpack:///./node_modules/fbemitter/lib/BaseEventEmitter.js","webpack:///./node_modules/fbemitter/lib/EventSubscription.js","webpack:///./node_modules/fbemitter/lib/EventSubscriptionVendor.js","webpack:///./node_modules/fbjs/lib/emptyFunction.js","webpack:///./src/middleware/index.js","webpack:///./src/middleware/validation/index.js","webpack:///./src/middleware/validation/Validation.js","webpack:///./src/middleware/validation/validate/RegexValidator.js","webpack:///./src/middleware/validation/validate/MaxLengthValidator.js","webpack:///./src/middleware/validation/validate/MinLengthValidator.js","webpack:///./src/middleware/validation/validate/MatchValidator.js","webpack:///./src/middleware/validation/validate/InValidator.js","webpack:///./src/middleware/validation/validate/MaxValidator.js","webpack:///./src/middleware/validation/validate/MinValidator.js","webpack:///./src/middleware/validation/validate/integer.js","webpack:///./src/middleware/validation/validate/required.js","webpack:///./src/middleware/validation/validate/empty.js","webpack:///./src/middleware/validation/ValidationError.js","webpack:///./node_modules/es6-error/es6/index.js","webpack:///./src/middleware/immutable/index.js"],"names":["model","prototype","_initEmitter","_emitter","EventEmitter","listeners","apply","arguments","emit","once","removeAllListeners","addListener","primitives","String","Number","Boolean","Array","Date","Object","Models","middleware","changeThrottle","definitions","createModel","properties","data","constructor","Error","__data","__parent","__parentKey","forEach","fn","initialize","call","keys","hasOwnProperty","key","__flush","def","props","descriptor","getOwnPropertyDescriptor","get","set","defineProperty","prop","propDef","value","isArray","property","type","includes","isModel","isType","isTypeFunction","val","newVal","undefined","isTypedArray","toJSON","err","console","error","listen","__changed","configurable","enumerable","push","name","modelName","modelDefinition","filter","mw","definition","TypedArray","ARRAY_FUNCTIONS","FUNCTIONS","cast","TypedArrayIterator","obj","array","i","length","done","items","__array","concat","defineIndexProperty","map","__cast","item","setParents","index","__json","__dirty","setTimeout","Symbol","iterator","newItem","pop","count","unshift","shift","removed","splice","lengthDelta","toAdd","slice","f","newArr","events","validation","immutable","ValidationMiddleware","validate","result","messages","validators","__isValid","isRequired","some","validator","required","hasValue","message","ValidationError","Regex","MaxLength","MinLength","Match","In","Max","Min","integer","empty","pattern","flags","regex","RegExp","test","maxLength","args","minLength","field","inValidator","values","join","MaxValidator","max","MinValidator","min","n","immutableMiddleware","valueOf","__changed2","virtual","log"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,q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C,WAAO,KAAKvB,OAAL,CAAauB,CAAb,EAAgBvG,KAAhB,CAAsB,KAAKgF,OAA3B,EAAoC/E,SAApC,CAAP;AACD,GAHH;AAAA,CADF,E;;;;;;;AC3WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB;AACA,aAAa,EAAE;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB;AACA,aAAa,EAAE;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,wCAAwC;AACxC,wCAAwC;AACxC;;AAEA;AACA,sHAAsH;AACtH;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,wCAAwC;AACxC;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC,aAAa,OAAO;AACpB,aAAa,EAAE;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,kC;;;;;;;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA,aAAa,wBAAwB;AACrC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,mC;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,kBAAkB;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,yC;;;;;;;;ACtGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+B;;;;;;;;;;;;;ACnCA;;;;AACA;;;;AACA;;;;;;kBAEe;AACbwG,0BADa;AAEbC,kCAFa;AAGbC;AAHa,C;;;;;;;;;;;;;ACJf;;;;AACA;;;;;;AAEA,SAASC,oBAAT,CAA+BlH,KAA/B,EAAsC;AACpCA,QAAMC,SAAN,CAAgBkH,QA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","file":"Models.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2aa165414ae4a37c8eab","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 0\n// module chunks = 0","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nvar fbemitter = {\n  EventEmitter: require('./lib/BaseEventEmitter'),\n  EmitterSubscription : require('./lib/EmitterSubscription')\n};\n\nmodule.exports = fbemitter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbemitter/index.js\n// module id = 1\n// module chunks = 0","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n * \n * @providesModule EmitterSubscription\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EventSubscription = require('./EventSubscription');\n\n/**\n * EmitterSubscription represents a subscription with listener and context data.\n */\n\nvar EmitterSubscription = (function (_EventSubscription) {\n  _inherits(EmitterSubscription, _EventSubscription);\n\n  /**\n   * @param {EventSubscriptionVendor} subscriber - The subscriber that controls\n   *   this subscription\n   * @param {function} listener - Function to invoke when the specified event is\n   *   emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  function EmitterSubscription(subscriber, listener, context) {\n    _classCallCheck(this, EmitterSubscription);\n\n    _EventSubscription.call(this, subscriber);\n    this.listener = listener;\n    this.context = context;\n  }\n\n  return EmitterSubscription;\n})(EventSubscription);\n\nmodule.exports = EmitterSubscription;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbemitter/lib/EmitterSubscription.js\n// module id = 2\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/invariant.js\n// module id = 3\n// module chunks = 0","import FBEmitter from 'fbemitter';\nconst { EventEmitter } = FBEmitter;\n\nexport default function (model) {\n  model.prototype._initEmitter = function() {\n    if (!this._emitter) {\n      this._emitter = new EventEmitter();\n    }\n  };\n\n  model.prototype.listeners = function() {\n    this._initEmitter();\n    return this._emitter.listeners.apply(this._emitter, arguments);\n  };\n\n  model.prototype.emit = function() {\n    if (!this._emitter) {\n      return;\n    }\n\n    return this._emitter.emit.apply(this._emitter, arguments);\n  };\n\n  model.prototype.once = function() {\n    this._initEmitter();\n    return this._emitter.once.apply(this._emitter, arguments);\n  };\n\n  model.prototype.removeAllListeners = function() {\n    if (!this._emitter) {\n      return;\n    }\n\n    return this._emitter.removeAllListeners.apply(this._emitter, arguments);\n  };\n\n  model.prototype.addListener = function() {\n    this._initEmitter();\n    return this._emitter.addListener.apply(this._emitter, arguments);\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/events/index.js","import TypedArray from './TypedArray';\nimport Middleware from './middleware';\n\nconst primitives = [String, Number, Boolean, Array, Date, Object];\n\nfunction Models({ middleware = [], changeThrottle = 16 }) {\n  const definitions = {};\n\n  function createModel(properties) {\n    function model(data) {\n      if (this.constructor !== model) {\n        throw new Error('Must be invoked with new.');\n      }\n\n      this.__data = {};\n      this.__parent = null;\n      this.__parentKey = null;\n\n      //Call any middleware initializers, if they exist.\n      this.constructor.middleware.forEach(\n        fn => (fn.initialize ? fn.initialize.call(this, data) : null)\n      );\n\n      if (data) {\n        Object.keys(data).forEach(key => {\n          if (data.hasOwnProperty(key)) {\n            this[key] = data[key];\n          }\n        });\n\n        //Flush the data.\n        if (this.__flush) {\n          this.__flush();\n        }\n      }\n\n      return this;\n    }\n\n    model.changeThrottle = changeThrottle;\n\n    //Store the model definition for later.\n    model.def = {\n      props: []\n    };\n\n    //Process all the properties sent in.\n    for (let key of Object.keys(properties)) {\n      if (!properties.hasOwnProperty(key)) {\n        continue;\n      }\n\n      const descriptor = Object.getOwnPropertyDescriptor(properties, key);\n\n      //Property can be a getter/setter, a function, a simple definition,\n      //a Model, a user defined Type, or a complex definition (wrapped in an object)\n\n      //This is a getter or setter passed in.\n      if (descriptor.get || descriptor.set) {\n        Object.defineProperty(model.prototype, key, {\n          get: descriptor.get,\n          set: descriptor.set\n        });\n        continue;\n      }\n\n      let prop = {\n        key: key\n      };\n\n      let propDef = descriptor.value;\n\n      //Unpack array types. ie. names: [String]\n      if (Array.isArray(propDef)) {\n        propDef = propDef[0];\n        prop.isArray = true;\n      }\n\n      const property = properties[key];\n\n      if (typeof propDef === 'object' && propDef.type) {\n        //This is a complex type definition being passed in.\n        prop = {\n          key: key,\n          ...property\n        };\n\n        //Unpack array types. ie. names: [String]\n        if (Array.isArray(propDef.type)) {\n          prop.type = propDef.type[0];\n          prop.isArray = true;\n        }\n      } else if (typeof propDef === 'string') {\n        //This is a lazy reference to another model being passed in.  Will be dealt with later.\n        prop.type = propDef;\n      } else if (primitives.includes(propDef)) {\n        //This is a primitive type, defined simply.\n        prop.type = propDef;\n      } else if (typeof propDef === 'function' && propDef.isModel) {\n        //This is a model definition that was passed in.\n        prop.type = propDef;\n      } else if (typeof propDef === 'function' && propDef.isType) {\n        prop.type = propDef;\n        prop.isTypeFunction = true;\n      } else if (typeof propDef === 'function') {\n        //Some other kind of function passed in.\n        model.prototype[key] = propDef;\n      }\n\n      //Setup the getters and setter for this guy.\n      Object.defineProperty(model.prototype, prop.key, {\n        get: function() {\n          return this.__data[prop.key];\n        },\n        set: function(val) {\n          let newVal = val;\n          try {\n            if (prop.type === Date && val) {\n              //TODO: dates could have some more weirdness.\n              newVal = new Date(val);\n            } else if (prop.isTypeFunction) {\n              newVal = prop.type.call(this, val);\n            } else if (prop.type.isModel || prop.isArray) {\n              // If this type is a model (deep object) or an array, we need to be able to propagate changes later.\n              //We also need to clear parent values from the old values if they exist for garbage collection.\n              if (this.__data[prop.key]) {\n                //TODO: what about arrays with parentKeys? Do we need to clear all of them, then reset again?\n                this.__data[prop.key].__parent = null;\n                this.__data[prop.key].__parentKey = null;\n\n                //Remove all event listeners if they are expiring.\n              }\n\n              if (val !== null && val !== undefined) {\n                if (prop.isArray && !val.isTypedArray) {\n                  //This prop type is an array, and you are not setting a TypedArray, we will cast it for you.\n                  newVal = new TypedArray(val, prop.type);\n                } else if (prop.isArray && val.isTypedArray) {\n                  //Clone it, because this is coming from another object?\n                  newVal = new TypedArray(val.toJSON(), prop.type);\n                } else if (prop.type.isModel && val.constructor !== prop.type) {\n                  //This value is a model, but it has not been created as a model yet.\n                  newVal = new prop.type(val);\n                } else if (\n                  prop.type.isModel &&\n                  val.constructor === prop.type.model\n                ) {\n                  //This value is a model, and it is coming from another object? Clone it.\n                  newVal = new prop.type(val.toJSON());\n                }\n\n                newVal.__parent = this;\n                newVal.__parentKey = prop.key;\n              }\n            } else {\n              newVal = val;\n            }\n          } catch (err) {\n            console.error(err);\n            throw err;\n          }\n\n          this.__data[prop.key] = newVal;\n\n          if (prop.listen !== false) {\n            this.__changed(prop.key);\n          }\n        },\n        configurable: false,\n        enumerable: true\n      });\n\n      model.def.props.push(prop);\n    }\n\n    model.prototype.__changed = function(key) {\n      if (this.__parent) {\n        this.__parent.__changed(this.__parentKey);\n      }\n    };\n\n    model.isModel = true;\n\n    return model;\n  }\n\n  return new class Models {\n    create(name, properties) {\n      const model = createModel(properties);\n\n      //Call all the middle wares for this model in order.\n      middleware.forEach(fn => fn(model));\n\n      model.model = name;\n      model.middleware = middleware;\n      definitions[name] = model;\n\n      //TODO: probably a better way to do this than iterate over all after each model is added.\n      //Attached references by name (string passed in as prop type).\n      for (let modelName in definitions) {\n        const modelDefinition = definitions[modelName];\n\n        modelDefinition.def.props\n          .filter(prop => typeof prop.type === 'string')\n          .forEach(prop => {\n            if (definitions[prop.type]) {\n              prop.type = definitions[prop.type];\n            }\n          });\n      }\n\n      return model;\n    }\n\n    addMiddleware(mw) {\n      for (let definition in definitions) {\n        mw(definitions[definition]);\n      }\n\n      middleware.push(mw);\n    }\n\n    get definitions() {\n      return definitions;\n    }\n\n    get middleware() {\n      return middleware;\n    }\n\n    get Middleware() {\n      return Middleware;\n    }\n\n    get changeThrottle() {\n      return changeThrottle;\n    }\n  }();\n}\n\nModels.middleware = Middleware;\nModels.TypedArray = TypedArray;\n\nexport default Models;\n\n/**\n const Template = new Models.Document('Template', {name: String});\n const template = new Template({name: 'Test'});\n\n template.validate();\n template.addListener('changed', (data) => console.log(data));\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/Models.js","import FBEmitter from 'fbemitter';\nconst { EventEmitter } = FBEmitter;\n\nconst ARRAY_FUNCTIONS = ['sort', 'reverse'];\n\nconst FUNCTIONS = [\n  'join',\n  'slice',\n  'concat',\n  'filter',\n  'forEach',\n  'includes',\n  'reduce',\n  'map',\n  'find',\n  'findIndex',\n  'some',\n  'indexOf'\n];\n\nconst cast = (val, type) => {\n  let newVal = val;\n\n  if (type === Date && val && val.constructor !== Date) {\n    //TODO: dates could have some more weirdness.\n    newVal = new Date(val);\n  } else if (type.isModel) {\n    if (val !== null && val !== undefined) {\n      if (val.constructor !== type) {\n        //This value is a model, but it has not been created as a model yet.\n        newVal = new type(val);\n      } else if (type.isModel && val.constructor === type.model) {\n        //This value is a model, and it is coming from another object? Clone it.\n        newVal = new type(val.toJSON());\n      }\n    }\n  }\n\n  return newVal;\n};\n\nclass TypedArrayIterator {\n  static isTypedArray(obj) {\n    return !obj ? false : this === obj.constructor;\n  }\n\n  static isArray(obj) {\n    return Array.isArray(obj);\n  }\n\n  constructor(array) {\n    this.i = 0;\n    this.array = array;\n  }\n\n  next() {\n    if (this.i >= this.array.length) {\n      this.i = 0;\n      return { done: true };\n    }\n\n    return { done: false, value: this.array[this.i++] };\n  }\n}\n\nexport default class TypedArray {\n  static changeThrottle = 16;\n\n  __cast(val) {\n    if (!this.isModel) {\n      return val;\n    } else {\n      return cast(val, this.type)\n    }\n  }\n\n  constructor(items, type) {\n    this.__array = Array.isArray(items) ? [].concat(items) : [items];\n    this.__parent = null;\n    this.__parentKey = null;\n    this.type = type;\n\n    for (let i = 0; i < this.__array.length; i++) {\n      this.defineIndexProperty(i);\n    }\n\n    //Cast any children.\n    if (this.isModel) {\n      this.__array = this.__array.map(item => this.__cast(item));\n    }\n\n    //Set any initial children.\n    this.setParents();\n\n    //Flush the data.\n    if (this.__flush) {\n      this.__flush();\n    }\n  }\n\n  defineIndexProperty(index) {\n    if (!(index in this)) {\n      Object.defineProperty(this, index, {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n          return this.__array[index];\n        },\n        set: function(val) {\n          const newVal = this.__cast(val);\n\n          if (this.type.isModel) {\n            //Clear out references for garbage collection\n            if (this.__array[index]) {\n              this.__array[index].__parent = null;\n              this.__array[index].__parentKey = null;\n            }\n\n            if (newVal) {\n              newVal.__parent = this;\n              newVal.__parentKey = index;\n            }\n          }\n\n          this.__array[index] = newVal;\n          this.__changed(index);\n        }\n      });\n    }\n  }\n\n  get isModel() {\n    return this.type && this.type.isModel;\n  }\n\n  setParents() {\n    if (this.isModel) {\n      for (let i = 0; i < this.__array.length; i++) {\n        if (this.__array[i]) {\n          this.__array[i].__parent = this;\n          this.__array[i].__parentKey = i;\n        }\n      }\n    }\n  }\n\n  clearParents() {\n    if (this.isModel) {\n      for (let i = 0; i < this.__array.length; i++) {\n        if (this.__array[i]) {\n          this.__array[i].__parent = null;\n          this.__array[i].__parentKey = null;\n        }\n      }\n    }\n  }\n\n  __flush() {\n    if (this.isModel) {\n      this.__json = this.__array.map(item => {\n        if (item) {\n          item.__flush();\n          return item.toJSON();\n        } else {\n          return item;\n        }\n      });\n    } else {\n      this.__json = [].concat(this.__array);\n    }\n\n    this.__dirty = false;\n\n    //if (this.constructor.middleware.includes(eventsMiddleware)) {\n    this.emit('change', this.__json);\n    //}\n  }\n\n  __changed(key) {\n    if (!this.__dirty) {\n      this.__dirty = setTimeout(\n        () => this.__flush(),\n        this.constructor.changeThrottle\n      );\n    }\n\n    //if (this.constructor.middleware.includes(eventsMiddleware)) {\n    this.emit(`${key}Changed`);\n    //}\n\n    if (this.__parent) {\n      this.__parent.__changed(this.__parentKey);\n    }\n  }\n\n  /**\n   * Iterator implementation.\n   * @returns {*}\n   */\n  [Symbol.iterator]() {\n    return new TypedArrayIterator(this);\n  }\n\n  get length() {\n    return this.__array.length;\n  }\n\n  push(item) {\n    const newItem = this.__cast(item);\n    this.__array.push(newItem);\n    this.defineIndexProperty(this.length - 1);\n    this.setParents();\n    this.__changed(this.length - 1);\n  }\n\n  pop() {\n    let item = this.__array.pop();\n\n    if (this.isModel && item) {\n      item.__parent = null;\n      item.__parentKey = null;\n    }\n\n    this.setParents();\n    this.__changed(this.length);\n    return item;\n  }\n\n  unshift() {\n    //TODO: this does not yet convert to type.\n    let count = this.__array.unshift.apply(this.__array, arguments);\n\n    for (let i = 0; i < count; i++) {\n      this.defineIndexProperty(this.length + i);\n    }\n\n    this.setParents();\n    this.__changed(0);\n\n    return count;\n  }\n\n  shift() {\n    let item = this.__array.shift();\n\n    if (this.isModel && item) {\n      item.__parent = null;\n      item.__parentKey = null;\n    }\n\n    this.setParents();\n    this.__changed(0);\n    return item;\n  }\n\n  splice() {\n    // arguments[0] is the start index\n    // arguments[1] is the deleteCount\n    // arguments[n] for n>1 are items to splice\n    let removed = this.__array.splice.apply(this.__array, arguments);\n\n    removed.forEach(item => {\n      if (this.isModel && item) {\n        item.__parent = null;\n        this.__parentKey = null;\n      }\n    });\n\n    let lengthDelta = -removed.length;\n    // splice uses flat parameters to add, not an array\n    // need to grab all arguments for n>1\n    let toAdd = Array.prototype.slice.call(arguments, 2); // produces an array\n\n    if (toAdd) {\n      lengthDelta += toAdd.length;\n    }\n\n    if (lengthDelta > 0) {\n      for (let i = 0; i < lengthDelta; i++) {\n        this.defineIndexProperty(this.length - 1 - i);\n      }\n    }\n\n    this.setParents();\n\n    this.__changed(this.length);\n    return removed;\n  }\n\n  get isTypedArray() {\n    return true;\n  }\n\n  valueOf() {\n    return this.__json;\n  }\n\n  toJSON() {\n    return this.__json;\n  }\n\n  /**\n   * Returns an new plain Array with the contents that were in this TypedArray instance.\n   *\n   * @returns {array}\n   */\n  toArray() {\n    return [].concat(this.__array);\n  }\n\n  _initEmitter() {\n    if (!this._emitter) {\n      this._emitter = new EventEmitter();\n    }\n  }\n\n  listeners() {\n    this._initEmitter();\n    return this._emitter.listeners.apply(this._emitter, arguments);\n  }\n\n  emit() {\n    if (!this._emitter) {\n      return;\n    }\n\n    return this._emitter.emit.apply(this._emitter, arguments);\n  }\n\n  once() {\n    this._initEmitter();\n    return this._emitter.once.apply(this._emitter, arguments);\n  }\n\n  removeAllListeners() {\n    if (!this._emitter) {\n      return;\n    }\n\n    return this._emitter.removeAllListeners.apply(this._emitter, arguments);\n  }\n\n  addListener() {\n    this._initEmitter();\n    return this._emitter.addListener.apply(this._emitter, arguments);\n  }\n}\n\nARRAY_FUNCTIONS.forEach(\n  f =>\n    (TypedArray.prototype[f] = function() {\n      const newArr = new TypedArray(\n        this.__array[f].apply(this.__array, arguments),\n        this.type\n      );\n\n      newArr.__parent = this.__parent;\n      newArr.__parentKey = this.__parentKey;\n\n      return newArr;\n    })\n);\n\nFUNCTIONS.forEach(\n  f =>\n    (TypedArray.prototype[f] = function() {\n      return this.__array[f].apply(this.__array, arguments);\n    })\n);\n\n\n\n// WEBPACK FOOTER //\n// ./src/TypedArray.js","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule BaseEventEmitter\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar EmitterSubscription = require('./EmitterSubscription');\nvar EventSubscriptionVendor = require('./EventSubscriptionVendor');\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\n\n/**\n * @class BaseEventEmitter\n * @description\n * An EventEmitter is responsible for managing a set of listeners and publishing\n * events to them when it is told that such events happened. In addition to the\n * data for the given event it also sends a event control object which allows\n * the listeners/handlers to prevent the default behavior of the given event.\n *\n * The emitter is designed to be generic enough to support all the different\n * contexts in which one might want to emit events. It is a simple multicast\n * mechanism on top of which extra functionality can be composed. For example, a\n * more advanced emitter may use an EventHolder and EventFactory.\n */\n\nvar BaseEventEmitter = (function () {\n  /**\n   * @constructor\n   */\n\n  function BaseEventEmitter() {\n    _classCallCheck(this, BaseEventEmitter);\n\n    this._subscriber = new EventSubscriptionVendor();\n    this._currentSubscription = null;\n  }\n\n  /**\n   * Adds a listener to be invoked when events of the specified type are\n   * emitted. An optional calling context may be provided. The data arguments\n   * emitted will be passed to the listener function.\n   *\n   * TODO: Annotate the listener arg's type. This is tricky because listeners\n   *       can be invoked with varargs.\n   *\n   * @param {string} eventType - Name of the event to listen to\n   * @param {function} listener - Function to invoke when the specified event is\n   *   emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  BaseEventEmitter.prototype.addListener = function addListener(eventType, listener, context) {\n    return this._subscriber.addSubscription(eventType, new EmitterSubscription(this._subscriber, listener, context));\n  };\n\n  /**\n   * Similar to addListener, except that the listener is removed after it is\n   * invoked once.\n   *\n   * @param {string} eventType - Name of the event to listen to\n   * @param {function} listener - Function to invoke only once when the\n   *   specified event is emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   */\n\n  BaseEventEmitter.prototype.once = function once(eventType, listener, context) {\n    var emitter = this;\n    return this.addListener(eventType, function () {\n      emitter.removeCurrentListener();\n      listener.apply(context, arguments);\n    });\n  };\n\n  /**\n   * Removes all of the registered listeners, including those registered as\n   * listener maps.\n   *\n   * @param {?string} eventType - Optional name of the event whose registered\n   *   listeners to remove\n   */\n\n  BaseEventEmitter.prototype.removeAllListeners = function removeAllListeners(eventType) {\n    this._subscriber.removeAllSubscriptions(eventType);\n  };\n\n  /**\n   * Provides an API that can be called during an eventing cycle to remove the\n   * last listener that was invoked. This allows a developer to provide an event\n   * object that can remove the listener (or listener map) during the\n   * invocation.\n   *\n   * If it is called when not inside of an emitting cycle it will throw.\n   *\n   * @throws {Error} When called not during an eventing cycle\n   *\n   * @example\n   *   var subscription = emitter.addListenerMap({\n   *     someEvent: function(data, event) {\n   *       console.log(data);\n   *       emitter.removeCurrentListener();\n   *     }\n   *   });\n   *\n   *   emitter.emit('someEvent', 'abc'); // logs 'abc'\n   *   emitter.emit('someEvent', 'def'); // does not log anything\n   */\n\n  BaseEventEmitter.prototype.removeCurrentListener = function removeCurrentListener() {\n    !!!this._currentSubscription ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Not in an emitting cycle; there is no current subscription') : invariant(false) : undefined;\n    this._subscriber.removeSubscription(this._currentSubscription);\n  };\n\n  /**\n   * Returns an array of listeners that are currently registered for the given\n   * event.\n   *\n   * @param {string} eventType - Name of the event to query\n   * @return {array}\n   */\n\n  BaseEventEmitter.prototype.listeners = function listeners(eventType) /* TODO: Array<EventSubscription> */{\n    var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n    return subscriptions ? subscriptions.filter(emptyFunction.thatReturnsTrue).map(function (subscription) {\n      return subscription.listener;\n    }) : [];\n  };\n\n  /**\n   * Emits an event of the given type with the given data. All handlers of that\n   * particular type will be notified.\n   *\n   * @param {string} eventType - Name of the event to emit\n   * @param {*} Arbitrary arguments to be passed to each registered listener\n   *\n   * @example\n   *   emitter.addListener('someEvent', function(message) {\n   *     console.log(message);\n   *   });\n   *\n   *   emitter.emit('someEvent', 'abc'); // logs 'abc'\n   */\n\n  BaseEventEmitter.prototype.emit = function emit(eventType) {\n    var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n    if (subscriptions) {\n      var keys = Object.keys(subscriptions);\n      for (var ii = 0; ii < keys.length; ii++) {\n        var key = keys[ii];\n        var subscription = subscriptions[key];\n        // The subscription may have been removed during this event loop.\n        if (subscription) {\n          this._currentSubscription = subscription;\n          this.__emitToSubscription.apply(this, [subscription].concat(Array.prototype.slice.call(arguments)));\n        }\n      }\n      this._currentSubscription = null;\n    }\n  };\n\n  /**\n   * Provides a hook to override how the emitter emits an event to a specific\n   * subscription. This allows you to set up logging and error boundaries\n   * specific to your environment.\n   *\n   * @param {EmitterSubscription} subscription\n   * @param {string} eventType\n   * @param {*} Arbitrary arguments to be passed to each registered listener\n   */\n\n  BaseEventEmitter.prototype.__emitToSubscription = function __emitToSubscription(subscription, eventType) {\n    var args = Array.prototype.slice.call(arguments, 2);\n    subscription.listener.apply(subscription.context, args);\n  };\n\n  return BaseEventEmitter;\n})();\n\nmodule.exports = BaseEventEmitter;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbemitter/lib/BaseEventEmitter.js\n// module id = 7\n// module chunks = 0","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule EventSubscription\n * @typechecks\n */\n\n'use strict';\n\n/**\n * EventSubscription represents a subscription to a particular event. It can\n * remove its own subscription.\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar EventSubscription = (function () {\n\n  /**\n   * @param {EventSubscriptionVendor} subscriber the subscriber that controls\n   *   this subscription.\n   */\n\n  function EventSubscription(subscriber) {\n    _classCallCheck(this, EventSubscription);\n\n    this.subscriber = subscriber;\n  }\n\n  /**\n   * Removes this subscription from the subscriber that controls it.\n   */\n\n  EventSubscription.prototype.remove = function remove() {\n    if (this.subscriber) {\n      this.subscriber.removeSubscription(this);\n      this.subscriber = null;\n    }\n  };\n\n  return EventSubscription;\n})();\n\nmodule.exports = EventSubscription;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbemitter/lib/EventSubscription.js\n// module id = 8\n// module chunks = 0","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n * \n * @providesModule EventSubscriptionVendor\n * @typechecks\n */\n\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\n/**\n * EventSubscriptionVendor stores a set of EventSubscriptions that are\n * subscribed to a particular event type.\n */\n\nvar EventSubscriptionVendor = (function () {\n  function EventSubscriptionVendor() {\n    _classCallCheck(this, EventSubscriptionVendor);\n\n    this._subscriptionsForType = {};\n    this._currentSubscription = null;\n  }\n\n  /**\n   * Adds a subscription keyed by an event type.\n   *\n   * @param {string} eventType\n   * @param {EventSubscription} subscription\n   */\n\n  EventSubscriptionVendor.prototype.addSubscription = function addSubscription(eventType, subscription) {\n    !(subscription.subscriber === this) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'The subscriber of the subscription is incorrectly set.') : invariant(false) : undefined;\n    if (!this._subscriptionsForType[eventType]) {\n      this._subscriptionsForType[eventType] = [];\n    }\n    var key = this._subscriptionsForType[eventType].length;\n    this._subscriptionsForType[eventType].push(subscription);\n    subscription.eventType = eventType;\n    subscription.key = key;\n    return subscription;\n  };\n\n  /**\n   * Removes a bulk set of the subscriptions.\n   *\n   * @param {?string} eventType - Optional name of the event type whose\n   *   registered supscriptions to remove, if null remove all subscriptions.\n   */\n\n  EventSubscriptionVendor.prototype.removeAllSubscriptions = function removeAllSubscriptions(eventType) {\n    if (eventType === undefined) {\n      this._subscriptionsForType = {};\n    } else {\n      delete this._subscriptionsForType[eventType];\n    }\n  };\n\n  /**\n   * Removes a specific subscription. Instead of calling this function, call\n   * `subscription.remove()` directly.\n   *\n   * @param {object} subscription\n   */\n\n  EventSubscriptionVendor.prototype.removeSubscription = function removeSubscription(subscription) {\n    var eventType = subscription.eventType;\n    var key = subscription.key;\n\n    var subscriptionsForType = this._subscriptionsForType[eventType];\n    if (subscriptionsForType) {\n      delete subscriptionsForType[key];\n    }\n  };\n\n  /**\n   * Returns the array of subscriptions that are currently registered for the\n   * given event type.\n   *\n   * Note: This array can be potentially sparse as subscriptions are deleted\n   * from it when they are removed.\n   *\n   * TODO: This returns a nullable array. wat?\n   *\n   * @param {string} eventType\n   * @return {?array}\n   */\n\n  EventSubscriptionVendor.prototype.getSubscriptionsForType = function getSubscriptionsForType(eventType) {\n    return this._subscriptionsForType[eventType];\n  };\n\n  return EventSubscriptionVendor;\n})();\n\nmodule.exports = EventSubscriptionVendor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbemitter/lib/EventSubscriptionVendor.js\n// module id = 9\n// module chunks = 0","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fbjs/lib/emptyFunction.js\n// module id = 10\n// module chunks = 0","import events from './events';\nimport validation from './validation';\nimport immutable from './immutable';\n\nexport default {\n  events,\n  validation,\n  immutable\n}\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/index.js","import Validation from './Validation';\nimport ValidationError from './ValidationError';\n\nfunction ValidationMiddleware (model) {\n  model.prototype.validate = function() {\n    const result = {\n      props: {},\n      messages: {}\n    };\n\n    const props = this.constructor.def.props.filter(\n      prop => prop.validators && prop.validators.length > 0\n    );\n\n    this.__isValid = true;\n\n    props.forEach(prop => {\n      //Required is a special validator, so we will check to see if its in the list.\n      const isRequired = prop.validators.some(\n        validator => validator === Validation.required\n      );\n\n      const hasValue = Validation.required.validate.call(\n        this,\n        this.__data[prop.key]\n      );\n\n      if (isRequired && !hasValue) {\n        //If required validation failed, no need to continue.\n        this.__isValid = false;\n        result.props[prop.key] = false;\n        result.messages[prop.key] = Validation.required.message;\n        return;\n      } else if (!isRequired && !hasValue) {\n        //If something is not required, and it has no value, it is technically valid.\n        result.props[prop.key] = true;\n        return;\n      }\n\n      prop.validators.forEach(validator => {\n        if (validator === Validation.required) {\n          return;\n        }\n\n        result.props[prop.key] = validator.validate.call(this, this.__data[prop.key]);\n\n        if (!result.props[prop.key]) {\n          this.__isValid = false;\n          result.messages[prop.key] = validator.message;\n        }\n      });\n    });\n\n    if (!this.__isValid) {\n      throw new ValidationError(result);\n    }\n\n    return this.__isValid;\n  };\n\n\n  //Setup the getters and setter for this guy.\n  Object.defineProperty(model.prototype, 'isValid', {\n    get: function() {\n      return !!this.__isValid;\n    }\n  });\n}\n\nValidationMiddleware.validators = Validation;\nValidationMiddleware.ValidationError = ValidationError;\n\nexport default ValidationMiddleware;\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/index.js","\"use strict\";\nimport RegexValidator from './validate/RegexValidator';\nimport MaxLengthValidator from './validate/MaxLengthValidator';\nimport MinLengthValidator from './validate/MinLengthValidator';\nimport MatchValidator from './validate/MatchValidator';\nimport InValidator from './validate/InValidator';\nimport MaxValidator from './validate/MaxValidator';\nimport MinValidator from './validate/MinValidator';\n\nimport integer from './validate/integer';\nimport required from './validate/required';\nimport empty from './validate/empty';\n\nexport default {\n  Regex: RegexValidator,\n  MaxLength: MaxLengthValidator,\n  MinLength: MinLengthValidator,\n  Match: MatchValidator,\n  In: InValidator,\n  Max: MaxValidator,\n  Min: MinValidator,\n  integer: integer,\n  required: required,\n  empty: empty\n}\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/Validation.js","\"use strict\";\n/**\n * A regex validator object that encapsulates a validation function and a message to be displayed on validation failure\n *  If you have a very specific use case, with a static regex pattern, consider creating your own validator type\n *  to take advantage of the gains by using regex literals\n * @param {string} [pattern=null] Regex pattern to test\n * @param {string} [flags=''] Flags to apply to regex test pattern,\n * @param {string} [message='Value does not match expected pattern'] Message associated with failure of validation\n * @returns {{validate: validate, message: string}}\n */\nexport default function(pattern, flags = '', message =  'Value does not match expected pattern') {\n\n  let regex = (pattern.constructor !== RegExp) ? new RegExp(pattern, flags) : pattern;\n\n  return {\n    validate: function(value) {\n      return value && regex.test(value);\n    },\n    message: message,\n    name: 'RegexValidator'\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/RegexValidator.js","export default function(maxLength, message = null) {\n  if (typeof maxLength !== 'number') {\n    throw new Error('maxLength must be provided and must be a number');\n  }\n\n  message = message || `Value length can be at most ${maxLength}`;\n\n  return {\n    validate: function(value) {\n      return !!(value && value.length <= maxLength);\n    },\n    message: message,\n    name: 'MaxLengthValidator',\n    args: 'maxLength',\n    maxLength: maxLength\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/MaxLengthValidator.js","export default function(minLength, message = null) {\n  if (typeof minLength !== 'number') {\n    throw new Error('minLength must be provided and must be a number');\n  }\n\n  message = message || `Value length must be at least ${minLength}`;\n\n  return {\n    validate: function(value) {\n      return !!(value && value.length >= minLength);\n    },\n    message: message,\n    name: 'MinLengthValidator',\n    args: ['minLength'],\n    minLength: minLength\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/MinLengthValidator.js","export default function(field, message = 'Values do not match') {\n\n  return {\n    validate: function(value) {\n      return this[field] === value;\n    },\n    message: message,\n    name: 'MatchValidator'\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/MatchValidator.js","export default function inValidator(values, message) {\n  if (!Array.isArray(values)) {\n    throw new Error('An array of values must be provided to the InValidator.');\n  }\n\n  message = message || `Value must be one of ${values.join(',')}`;\n\n  return {\n    validate: function(value) {\n      return values.includes(value);\n    },\n    message: message,\n    name: 'InValidator',\n    args: ['values'],\n    values: values\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/InValidator.js","export default function MaxValidator(max, message) {\n  if (typeof max !== 'number') {\n    throw new Error('max must be provided and must be a number.');\n  }\n\n  message = message || `Value must be max ${max}`;\n\n  return {\n    validate: function(value) {\n      return value <= max;\n    },\n    message: message,\n    name: 'MaxValidator',\n    args: ['max'],\n    max: max\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/MaxValidator.js","export default function MinValidator(min, message) {\n  if (typeof min !== 'number') {\n    throw new Error('min must be provided and must be a number.');\n  }\n\n  message = message || `Value must be min ${min}`;\n\n  return {\n    validate: function(value) {\n      return value >= min;\n    },\n    message: message,\n    name: MinValidator,\n    args: ['min'],\n    min: min\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/MinValidator.js","export default {\n  validate: function(n) {\n    return (n === +n) && (n === (n|0));\n  },\n  message: 'You have to enter a whole number value.',\n  name: 'integer'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/integer.js","export default {\n  validate: function(value) {\n    return value !== null && value !== undefined;\n  },\n  message: 'This field is required.',\n  name: 'required'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/required.js","export default {\n  validate: function(value) {\n    return !Boolean(value)\n  },\n  message: 'This field must be empty.',\n  name: 'empty'\n};\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/validate/empty.js","import ExtendableError from 'es6-error';\n\nexport default class ValidationError extends ExtendableError {\n  constructor(result) {\n    super();\n\n    this.validation = result;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/validation/ValidationError.js","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    cls.apply(this, arguments);\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nvar ExtendableError = function (_extendableBuiltin2) {\n  _inherits(ExtendableError, _extendableBuiltin2);\n\n  function ExtendableError() {\n    var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    _classCallCheck(this, ExtendableError);\n\n    // extending Error is weird and does not propagate `message`\n    var _this = _possibleConstructorReturn(this, (ExtendableError.__proto__ || Object.getPrototypeOf(ExtendableError)).call(this, message));\n\n    Object.defineProperty(_this, 'message', {\n      configurable: true,\n      enumerable: false,\n      value: message,\n      writable: true\n    });\n\n    Object.defineProperty(_this, 'name', {\n      configurable: true,\n      enumerable: false,\n      value: _this.constructor.name,\n      writable: true\n    });\n\n    if (Error.hasOwnProperty('captureStackTrace')) {\n      Error.captureStackTrace(_this, _this.constructor);\n      return _possibleConstructorReturn(_this);\n    }\n\n    Object.defineProperty(_this, 'stack', {\n      configurable: true,\n      enumerable: false,\n      value: new Error(message).stack,\n      writable: true\n    });\n    return _this;\n  }\n\n  return ExtendableError;\n}(_extendableBuiltin(Error));\n\nexport default ExtendableError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/es6-error/es6/index.js\n// module id = 25\n// module chunks = 0","import eventsMiddleware from '../events';\n\nfunction immutableMiddleware(model) {\n  model.prototype.valueOf = function() {\n    return this.__json;\n  };\n\n  model.prototype.toJSON = function() {\n    return this.__json;\n  };\n\n  model.prototype.__changed2 = model.prototype.__changed;\n\n  model.prototype.__flush = function() {\n    const data = {};\n\n    this.constructor.def.props.filter(prop => !prop.virtual).forEach(prop => {\n      const val = this.__data[prop.key];\n\n      if (!prop.type) { console.log(model.model, prop) };\n\n      if (prop.type.isModel || prop.isArray) {\n        if (val) {\n          val.__flush();\n          data[prop.key] = val.toJSON();\n        } else {\n          data[prop.key] = val;\n        }\n      } else {\n        data[prop.key] = val;\n      }\n    });\n\n    this.__json = data;\n    this.__dirty = false;\n\n    if (this.constructor.middleware.includes(eventsMiddleware)) {\n      this.emit('change', data);\n    }\n  };\n\n  model.prototype.__changed = function(key) {\n    if (!this.__dirty) {\n      this.__dirty = setTimeout(\n        () => this.__flush(),\n        this.constructor.changeThrottle\n      );\n    }\n\n    if (this.constructor.middleware.includes(eventsMiddleware)) {\n      this.emit(`${key}Changed`);\n    }\n\n    this.__changed2(key);\n  };\n\n  //Setup the getters and setter for this guy.\n  Object.defineProperty(model.prototype, 'hasChanges', {\n    get: function() {\n      return !!this.__dirty;\n    }\n  });\n}\n\nimmutableMiddleware.initialize = function(data) {\n  this.__json = {};\n  this.__dirty = false;\n};\n\nexport default immutableMiddleware;\n\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/immutable/index.js"],"sourceRoot":""}